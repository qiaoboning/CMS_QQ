!function(e){"object"==typeof module&&module.exports?module.exports=e:e(Highcharts)}(function(e){!function(x){var m,h,r=x.win.document,c=x.each,p=x.objectEach,n=x.pick,g=x.inArray,v=x.isNumber,y=x.splat,C=x.fireEvent;m=Array.prototype.some?function(e,t,r){Array.prototype.some.call(e,t,r)}:function(e,t,r){for(var n=0,s=e.length;n<s&&!0!==t.call(r,e[n],n,e);n++);},x.ajax=function(e){var t=x.merge(!0,{url:!1,type:"GET",dataType:"json",success:!1,error:!1,data:!1,headers:{}},e);e={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"};var r=new XMLHttpRequest;if(!t.url)return!1;r.open(t.type.toUpperCase(),t.url,!0),r.setRequestHeader("Content-Type",e[t.dataType]||e.text),x.objectEach(t.headers,function(e,t){r.setRequestHeader(t,e)}),r.onreadystatechange=function(){var e;if(4===r.readyState){if(200===r.status){if(e=r.responseText,"json"===t.dataType)try{e=JSON.parse(e)}catch(e){return void(t.error&&t.error(r,e))}return t.success&&t.success(e)}t.error&&t.error(r,r.responseText)}};try{t.data=JSON.stringify(t.data)}catch(e){}r.send(t.data||!0)};var i=function(e,t){this.init(e,t)};x.extend(i.prototype,{init:function(e,t){var r=e.decimalPoint;"."!==r&&","!==r&&(r=void 0),this.options=e,this.chartOptions=t,this.columns=e.columns||this.rowsToColumns(e.rows)||[],this.firstRowAsNames=n(e.firstRowAsNames,!0),this.decimalRegex=r&&new RegExp("^(-?[0-9]+)"+r+"([0-9]+)$"),this.rawColumns=[],this.columns.length?this.dataFound():(this.parseCSV(),this.parseTable(),this.parseGoogleSpreadsheet())},getColumnDistribution:function(){var s,o=this.chartOptions,e=this.options,t=[],a=function(e){return(x.seriesTypes[e||"line"].prototype.pointArrayMap||[0]).length},i=o&&o.chart&&o.chart.type,l=[],u=[],d=0;c(o&&o.series||[],function(e){l.push(a(e.type||i))}),c(e&&e.seriesMapping||[],function(e){t.push(e.x||0)}),0===t.length&&t.push(0),c(e&&e.seriesMapping||[],function(e){var r=new h,t=l[d]||a(i),n=x.seriesTypes[((o&&o.series||[])[d]||{}).type||i||"line"].prototype.pointArrayMap||["y"];for(r.addColumnReader(e.x,"x"),p(e,function(e,t){"x"!==t&&r.addColumnReader(e,t)}),s=0;s<t;s++)r.hasReader(n[s])||r.addColumnReader(void 0,n[s]);u.push(r),d++}),void 0===(e=x.seriesTypes[i||"line"].prototype.pointArrayMap)&&(e=["y"]),this.valueCount={global:a(i),xColumns:t,individual:l,seriesBuilders:u,globalPointArrayMap:e}},dataFound:function(){this.options.switchRowsAndColumns&&(this.columns=this.rowsToColumns(this.columns)),this.getColumnDistribution(),this.parseTypes(),!1!==this.parsed()&&this.complete()},parseCSV:function(e){function t(t,e,r,n){function s(e){l=t[e],u=t[e-1],d=t[e+1]}function o(e){y.length<p+1&&y.push([e]),y[p][y[p].length-1]!==e&&y[p].push(e)}function a(){m<g||v<m?(++m,h=""):(!isNaN(parseFloat(h))&&isFinite(h)?(h=parseFloat(h),o("number")):isNaN(Date.parse(h))?o("string"):(h=h.replace(/\//g,"-"),o("date")),c.length<p+1&&c.push([]),r||(c[p][e]=h),h="",++p,++m)}var i=0,l="",u="",d="",h="",m=0,p=0;if(t.trim().length&&"#"!==t.trim()[0]){for(;i<t.length;i++){if(s(i),"#"===l)return void a();if('"'===l)for(s(++i);i<t.length&&('"'!==l||'"'===u||'"'===d);)('"'!==l||'"'===l&&'"'!==u)&&(h+=l),s(++i);else n&&n[l]?n[l](l,h)&&a():l===f?a():h+=l}a()}}var c,u=this,d=e||this.options,r=d.csv;e=void 0!==d.startRow&&d.startRow?d.startRow:0;var f,n,i,l,s=d.endRow||Number.MAX_VALUE,g=void 0!==d.startColumn&&d.startColumn?d.startColumn:0,v=d.endColumn||Number.MAX_VALUE,o=0,y=[],h={",":0,";":0,"\t":0};if(c=this.columns=[],r){r=r.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split(d.lineDelimiter||"\n"),(!e||e<0)&&(e=0),(!s||s>=r.length)&&(s=r.length-1),d.itemDelimiter?f=d.itemDelimiter:(f=null,l=i=0,m(r,function(e,t){var r,n,s=!1,o="";if(13<t)return!0;for(var a=0;a<e.length&&(t=e[a],r=e[a+1],n=e[a-1],"#"!==t);a++){if('"'===t)if(s){if('"'!==n&&'"'!==r){for(;" "===r&&a<e.length;)r=e[++a];void 0!==h[r]&&h[r]++,s=!1}}else s=!0;else void 0!==h[t]?(o=o.trim(),isNaN(Date.parse(o))&&!isNaN(o)&&isFinite(o)||h[t]++,o=""):o+=t;","===t&&l++,"."===t&&i++}}),n=h[";"]>h[","]?";":",",d.decimalPoint||(d.decimalPoint=l<i?".":",",u.decimalRegex=new RegExp("^(-?[0-9]+)"+d.decimalPoint+"([0-9]+)$")),f=n);var a=0;for(o=e;o<=s;o++)"#"===r[o][0]?a++:t(r[o],o-e-a);d.columnTypes&&0!==d.columnTypes.length||!y.length||!y[0].length||"date"!==y[0][1]||d.dateFormat||(d.dateFormat=function(e,t){var r,n,s,o=0,a=!1,i=[],l=[];for((!t||t>e.length)&&(t=e.length);o<t;o++)if(void 0!==e[o]&&e[o]&&e[o].length)for(r=e[o].trim().replace(/\//g," ").replace(/\-/g," ").split(" "),n=["","",""],s=0;s<r.length;s++)s<n.length&&(r[s]=parseInt(r[s],10),r[s]&&(l[s]=!l[s]||l[s]<r[s]?r[s]:l[s],void 0!==i[s]?i[s]!==r[s]&&(i[s]=!1):i[s]=r[s],31<r[s]?n[s]=r[s]<100?"YY":"YYYY":12<r[s]&&r[s]<=31?(n[s]="dd",a=!0):n[s].length||(n[s]="mm")));if(a){for(s=0;s<i.length;s++)!1!==i[s]?12<l[s]&&"YY"!==n[s]&&"YYYY"!==n[s]&&(n[s]="YY"):12<l[s]&&"mm"===n[s]&&(n[s]="dd");return 3===n.length&&"dd"===n[1]&&"dd"===n[2]&&(n[2]="YY"),e=n.join("/"),(d.dateFormats||u.dateFormats)[e]?e:(C("invalidDateFormat"),x.error("Could not deduce date format"),"YYYY/mm/dd")}return"YYYY/mm/dd"}(c[0])),this.dataFound()}return c},parseTable:function(){var e=this.options,t=e.table,n=this.columns,s=e.startRow||0,o=e.endRow||Number.MAX_VALUE,a=e.startColumn||0,i=e.endColumn||Number.MAX_VALUE;t&&("string"==typeof t&&(t=r.getElementById(t)),c(t.getElementsByTagName("tr"),function(e,r){s<=r&&r<=o&&c(e.children,function(e,t){("TD"===e.tagName||"TH"===e.tagName)&&a<=t&&t<=i&&(n[t-a]||(n[t-a]=[]),n[t-a][r-s]=e.innerHTML)})}),this.dataFound())},parseGoogleSpreadsheet:function(){var a,i,e,t,l=this,r=this.options,n=r.googleSpreadsheetKey,s=r.googleSpreadsheetWorksheet||1,u=this.columns,d=r.startRow||0,h=r.endRow||Number.MAX_VALUE,m=r.startColumn||0,p=r.endColumn||Number.MAX_VALUE;n&&(e=function(e){var t,r,n=(e=e.feed.entry).length,s=0,o=0;for(r=0;r<n;r++)t=e[r],s=Math.max(s,t.gs$cell.col),o=Math.max(o,t.gs$cell.row);for(r=0;r<s;r++)m<=r&&r<=p&&(u[r-m]=[],u[r-m].length=Math.min(o,h-d));for(r=0;r<n;r++)t=e[r],a=t.gs$cell.row-1,i=t.gs$cell.col-1,m<=i&&i<=p&&d<=a&&a<=h&&(s=t.gs$cell||t.content,t=null,s.numericValue?t=0<=s.$t.indexOf("/")||0<=s.$t.indexOf("-")?s.$t:0<s.$t.indexOf("%")?100*parseFloat(s.numericValue):parseFloat(s.numericValue):s.$t&&s.$t.length&&(t=s.$t),u[i-m][a-d]=t);c(u,function(e){for(r=0;r<e.length;r++)void 0===e[r]&&(e[r]=null)}),l.dataFound()},t=["https://spreadsheets.google.com/feeds/cells",n,s,"public/values?alt=json"].join("/"),x.ajax({url:t,dataType:"json",success:e,error:function(e,t){return r.error&&r.error(t,e)}}))},trim:function(e,t){return"string"==typeof e&&(e=e.replace(/^\s+|\s+$/g,""),t&&/^[0-9\s]+$/.test(e)&&(e=e.replace(/\s/g,"")),this.decimalRegex&&(e=e.replace(this.decimalRegex,"$1.$2"))),e},parseTypes:function(){for(var e=this.columns,t=e.length;t--;)this.parseColumn(e[t],t)},parseColumn:function(e,t){var r,n,s,o,a,i,l=this.rawColumns,u=this.columns,d=e.length,h=this.firstRowAsNames,m=-1!==g(t,this.valueCount.xColumns),p=[],c=this.chartOptions,f=(this.options.columnTypes||[])[t];c=m&&(c&&c.xAxis&&"category"===y(c.xAxis)[0].type||"string"===f);for(l[t]||(l[t]=[]);d--;)r=p[d]||e[d],s=this.trim(r),o=this.trim(r,!0),n=parseFloat(o),void 0===l[t][d]&&(l[t][d]=s),c||0===d&&h?e[d]=""+s:+o===n?(31536e6<(e[d]=n)&&"float"!==f?e.isDatetime=!0:e.isNumeric=!0,void 0!==e[d+1]&&(i=n>e[d+1])):(s&&s.length&&(a=this.parseDate(r)),m&&v(a)&&"float"!==f?(p[d]=r,e[d]=a,e.isDatetime=!0,void 0!==e[d+1]&&((r=a>e[d+1])!==i&&void 0!==i&&(this.alternativeFormat?(this.dateFormat=this.alternativeFormat,d=e.length,this.alternativeFormat=this.dateFormats[this.dateFormat].alternative):e.unsorted=!0),i=r)):(e[d]=""===s?null:s,0!==d&&(e.isDatetime||e.isNumeric)&&(e.mixed=!0)));if(m&&e.mixed&&(u[t]=l[t]),m&&i&&this.options.sort)for(t=0;t<u.length;t++)u[t].reverse(),h&&u[t].unshift(u[t].pop())},dateFormats:{"YYYY/mm/dd":{regex:/^([0-9]{4})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{1,2})$/,parser:function(e){return Date.UTC(+e[1],e[2]-1,+e[3])}},"dd/mm/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(e){return Date.UTC(+e[3],e[2]-1,+e[1])},alternative:"mm/dd/YYYY"},"mm/dd/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(e){return Date.UTC(+e[3],e[1]-1,+e[2])}},"dd/mm/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(e){var t=(t=+e[3])>(new Date).getFullYear()-2e3?t+1900:t+2e3;return Date.UTC(t,e[2]-1,+e[1])},alternative:"mm/dd/YY"},"mm/dd/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(e){return Date.UTC(+e[3]+2e3,e[1]-1,+e[2])}}},parseDate:function(e){var t,r,n,s=this.options.parseDate,o=this.options.dateFormat||this.dateFormat;if(s)t=s(e);else if("string"==typeof e){if(o)(s=this.dateFormats[o])||(s=this.dateFormats["YYYY/mm/dd"]),(n=e.match(s.regex))&&(t=s.parser(n));else for(r in this.dateFormats)if(s=this.dateFormats[r],n=e.match(s.regex)){this.dateFormat=r,this.alternativeFormat=s.alternative,t=s.parser(n);break}n||("object"==typeof(n=Date.parse(e))&&null!==n&&n.getTime?t=n.getTime()-6e4*n.getTimezoneOffset():v(n)&&(t=n-6e4*new Date(n).getTimezoneOffset()))}return t},rowsToColumns:function(e){var t,r,n,s,o;if(e)for(o=[],r=e.length,t=0;t<r;t++)for(s=e[t].length,n=0;n<s;n++)o[n]||(o[n]=[]),o[n][t]=e[t][n];return o},parsed:function(){if(this.options.parsed)return this.options.parsed.call(this,this.columns)},getFreeIndexes:function(e,t){var r,n,s=[],o=[];for(r=0;r<e;r+=1)s.push(!0);for(e=0;e<t.length;e+=1)for(n=t[e].getReferencedColumnIndexes(),r=0;r<n.length;r+=1)s[n[r]]=!1;for(r=0;r<s.length;r+=1)s[r]&&o.push(r);return o},complete:function(){var e,t,r,n,s,o,a=this.columns,i=this.options,l=[];if(i.complete||i.afterComplete){for(n=0;n<a.length;n++)this.firstRowAsNames&&(a[n].name=a[n].shift());for(t=[],r=this.getFreeIndexes(a.length,this.valueCount.seriesBuilders),n=0;n<this.valueCount.seriesBuilders.length;n++)(o=this.valueCount.seriesBuilders[n]).populateColumns(r)&&l.push(o);for(;0<r.length;){for((o=new h).addColumnReader(0,"x"),-1!==(n=g(0,r))&&r.splice(n,1),n=0;n<this.valueCount.global;n++)o.addColumnReader(void 0,this.valueCount.globalPointArrayMap[n]);o.populateColumns(r)&&l.push(o)}if(0<l.length&&0<l[0].readers.length&&(void 0!==(o=a[l[0].readers[0].columnIndex])&&(o.isDatetime?e="datetime":o.isNumeric||(e="category"))),"category"===e)for(n=0;n<l.length;n++)for(o=l[n],r=0;r<o.readers.length;r++)"x"===o.readers[r].configName&&(o.readers[r].configName="name");for(n=0;n<l.length;n++){for(o=l[n],r=[],s=0;s<a[0].length;s++)r[s]=o.read(a,s);t[n]={data:r},o.name&&(t[n].name=o.name),"category"===e&&(t[n].turboThreshold=0)}a={series:t},e&&(a.xAxis={type:e},"category"===e&&(a.xAxis.uniqueNames=!1)),i.complete&&i.complete(a),i.afterComplete&&i.afterComplete(a)}},update:function(e,t){var r=this.chart;e&&(e.afterComplete=function(e){r.update(e,t)},x.data(e))}}),x.Data=i,x.data=function(e,t){return new i(e,t)},x.wrap(x.Chart.prototype,"init",function(n,s,o){var a=this;s&&s.data?(a.data=new i(x.extend(s.data,{afterComplete:function(e){var t,r;if(s.hasOwnProperty("series"))if("object"==typeof s.series)for(t=Math.max(s.series.length,e.series.length);t--;)r=s.series[t]||{},s.series[t]=x.merge(r,e.series[t]);else delete s.series;s=x.merge(e,s),n.call(a,s,o)}}),s),a.data.chart=a):n.call(a,s,o)}),(h=function(){this.readers=[],this.pointIsArray=!0}).prototype.populateColumns=function(t){var r=!0;return c(this.readers,function(e){void 0===e.columnIndex&&(e.columnIndex=t.shift())}),c(this.readers,function(e){void 0===e.columnIndex&&(r=!1)}),r},h.prototype.read=function(r,n){var e,s=this.pointIsArray,o=s?[]:{};return c(this.readers,function(e){var t=r[e.columnIndex][n];s?o.push(t):o[e.configName]=t}),void 0===this.name&&2<=this.readers.length&&(2<=(e=this.getReferencedColumnIndexes()).length&&(e.shift(),e.sort(),this.name=r[e.shift()].name)),o},h.prototype.addColumnReader=function(e,t){this.readers.push({columnIndex:e,configName:t}),"x"!==t&&"y"!==t&&void 0!==t&&(this.pointIsArray=!1)},h.prototype.getReferencedColumnIndexes=function(){var e,t,r=[];for(e=0;e<this.readers.length;e+=1)void 0!==(t=this.readers[e]).columnIndex&&r.push(t.columnIndex);return r},h.prototype.hasReader=function(e){var t;for(t=0;t<this.readers.length;t+=1)if(this.readers[t].configName===e)return!0}}(e)});